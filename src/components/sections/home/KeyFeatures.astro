---
import { keyFeatures as items } from "../../../data/keyFeaturesData";
import TitleOfSection from "../../layout/TitleOfSection.astro";
---

<section class="container-custom mx-auto py-12 md:py-16 xl:py-28">
  <TitleOfSection 
    subtitle="¿POR QUÉ ELEGIR"
    titleOfSection="SCANAVINI?"
  />

  <div class="mt-8 md:mt-10">
    <ul class="flex flex-nowrap items-start justify-between gap-3 sm:gap-4 md:gap-6">
      {
        items.slice(0, 5).map((item) => (
          <li class="flex-1 basis-0 min-w-0" aria-label={item.title}>
            <article 
              class=" h-full text-center md:px-3 pb-3 lg:py-5 sm:px-4 flex flex-col items-center justify-center"
              data-sr="feature-card"
            >
              <div class="mx-auto border lg:border-2 border-gray-600 w-12 h-12 p-1  sm:w-16 sm:h-16 sm:p-2 md:w-20 md:h-20 md:p-4 lg:w-28 lg:h-28 2xl:w-32 2xl:h-32 rounded-full  flex items-center justify-center overflow-hidden">
                <img
                  src={item.icon}
                  alt={item.alt}
                  loading="lazy"
                  class="w-[70%] h-[70%] sm:w-[80%] sm:h-[80%] md:w-full md:h-full object-contain"
                />
              </div>
              <p class="mt-2 text-neutral-grey text-center text-[9px] sm:text-[11px]  lg:text-sm leading-snug">
                {item.subtitle}
              </p>
              <h3 class="text-brand font-semibold text-center text-[10px] sm:text-xs md:text-sm lg:text-lg leading-tight">
                {item.title}
              </h3>
            </article>
          </li>
        ))
      }
    </ul>
  </div>
</section>

<script>
  import ScrollReveal from "scrollreveal";

  // Este script sólo se ejecuta en el navegador
  if (typeof window !== "undefined") {
    const prefersReducedMotion = window.matchMedia?.("(prefers-reduced-motion: reduce)")?.matches;

    if (!prefersReducedMotion) {
      ScrollReveal().reveal('[data-sr="feature-card"]', {
        distance: "80px",          // se mueve un poco desde abajo
        origin: "bottom",
        opacity: 0,
        duration: 700,
        easing: "cubic-bezier(0.4, 0, 0.2, 1)", // similar a tu transición global
        interval: 80,              // stagger entre cada card
        reset: true,              // solo se anima una vez
        cleanup: false,             // limpia estilos inline cuando termina
        delay: 350,
      });
    }
  }
</script>
