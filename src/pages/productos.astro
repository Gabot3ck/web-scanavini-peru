---
import Layout from "../layouts/Layout.astro";
import { featuredProducts, categoryProducts } from "../data/productsData";

const gridFeatured =
  "mb-[clamp(90px,7.5vw,120px)] pb-8 grid grid-cols-3 gap-x-[clamp(8px,2.2vw,24px)] gap-y-[clamp(12px,3vw,32px)] max-[425px]:flex max-[425px]:overflow-x-auto max-[425px]:snap-x max-[425px]:snap-mandatory max-[425px]:gap-x-3 max-[425px]:gap-y-0 max-[425px]:-mx-4 max-[425px]:px-4"
const featuredArticle =
  "featured-product-card group min-w-0 max-[425px]:min-w-[125px] max-[425px]:flex-[0_0_auto] max-[425px]:snap-center max-[425px]:mr-3 first:max-[425px]:ml-0 last:max-[425px]:mr-0"
const featuredProductCard =
  "w-full overflow-hidden rounded-lg bg-transparent flex items-center justify-center max-[425px]:h-[120px] min-[426px]:h-[clamp(140px,18vw,200px)] min-[426px]:px-2 lg:h-[clamp(200px,22vw,280px)] lg:px-3 xl:h-[clamp(240px,20vw,320px)] 2xl:h-[clamp(260px,18vw,360px)]"
const gridCategory =
  "grid grid-cols-3 max-[480px]:grid-cols-2 gap-x-[clamp(16px,2.2vw,48px)] gap-y-[clamp(12px,3vw,32px)] overflow-x-hidden";
const btnCard =
  "text-[10px] sm:text-[11px] md:text-xs lg:text-[15px] font-regular lg:font-regular w-10/12 md:w-full max-w-[143px] md:max-w-[210px] h-8 md:h-10 lg:h-12 tracking-wide flex justify-center items-center bg-brand text-background-light drop-shadow-lg rounded-full hover:scale-105 transition-transform duration-400"


const jsonLd = {
  "@context": "https://schema.org",
  "@type": "Product",
  "name": "Scanavini Comercial S.A.C.",
  "url": "https://www.scanavini.pe/productos",
  "description": "Cerraduras de sobreponer, Cerraduras de embutir, Cerraduras de Pomo, Cerraduras Digitales, manillas candados, bisagras, y otros productos afines",
  "logo": "https://www.scanavini.pe/iso_scanavini.svg",
  "image": "https://www.scanavini.pe/images/seo/productos_scanavini_75_anios.webp",
};
---

<Layout
  title="Productos | Categorías"
  description="Cerraduras, Cerraduras Digitales, Manillas, Control de acceso, Barras antipánico, etc productos Scanavini"
  menuTextClass="text-gray-700"
  logoBaseVariant="dark"
  logoSwapOnHoverAtTop={false}
  logoSwapOnScroll={true}
  robots="index,follow"
  jsonLd={ jsonLd }
>
  <section class="py-12 sm:py-16 lg:py-28 bg-background-light relative">
    <div class="container-custom">
      <!-- Main Title -->
      <header 
        class="mb-[clamp(24px,6vw,96px)] text-center"
        data-animation="header-products"
      >
        <h1 class="products-title">
          PRODUCTOS DESTACADOS
        </h1>
      </header>

      <!-- Productos Destacados: carrusel <=425px, grid 3 cols >425px -->
      <div class={ gridFeatured } data-animation="featured-products">
        {
          featuredProducts.map((item, i) => (
            <article class={ featuredArticle } id={`featured-${i + 1}`}>
              <div class={ featuredProductCard }>
                <img
                  src={item.image}
                  alt={item.title}
                  loading="lazy"
                  decoding="async"
                  class="h-full w-auto max-w-full object-contain transition-transform duration-300 group-hover:scale-105"
                  sizes="(max-width: 425px) 125px, (max-width: 959px) 30vw, (max-width: 1279px) 28vw, (max-width: 1919px) 24vw, 20vw"
                />
              </div>

              <h2
                class="mt-4 md:mt-6 lg:mt-8 text-center font-semibold text-neutral-dark text-[13px] sm:text-sm md:text-base lg:text-xl leading-tight"
                title={item.title}
              >
                {item.title}
              </h2>

              <div class="mt-4 flex justify-center">
                <a
                  href={item.href}
                  class={ btnCard }
                  aria-label={`Ver productos de ${item.title}`}
                  target="_blank"
                  rel="noopener noreferrer"
                >
                  COMPRAR
                </a>
              </div>
            </article>
          ))
        }
      </div>



      <!-- Categories -->
      <main class=" text-center">
        <h2 class="products-title lg:mb-8 xl:mb-12">
          CATEGORÍA DE PRODUCTOS
        </h2>

        <div class={ gridCategory } >
          {categoryProducts.map((item, i) => (
            <article
              id={`category-${i + 1}`}
              class="group min-w-0 py-3 flex flex-col justify-between"
              data-animation="category-products"
            >
              <div class="aspect-[4/3] w-full overflow-hidden rounded-lg bg-background-muted flex items-center justify-center">
                <img
                  src={item.image}
                  alt={item.title}
                  loading="lazy"
                  decoding="async"
                  class="h-full w-full object-cover transition-transform duration-300 group-hover:scale-105"
                  sizes="(max-width: 425px) 50vw, 33vw"
                />
              </div>

              <h3
                class="mt-3 md:mt-6 lg:mt-8 text-center font-semibold text-neutral-dark text-[13px] sm:text-sm md:text-base lg:text-xl leading-tight"
                title={item.title}
              >
                {item.title}
              </h3>

              <div class="mt-[clamp(10px,2.2vw,16px)] flex justify-center">
                <a
                  href={item.href}
                  class={ btnCard }
                  aria-label={`Ver productos de ${item.title}`}
                  target="_blank"
                  rel="noopener noreferrer"
                >
                  VER PRODUCTOS
                </a>
              </div>
            </article>
          ))}
        </div>
      </main>
    </div>
  </section>

  <script>
    import ScrollReveal from "scrollreveal";

    ScrollReveal().reveal('[data-animation="header-products"]', {
      distance: "180px",          // se mueve un poco desde abajo
      origin: "bottom",
      opacity: 0,
      duration: 700,
      easing: "cubic-bezier(0.4, 0, 0.2, 1)", // similar a tu transición global
      interval: 80,              // stagger entre cada card
      reset: false,              // solo se anima una vez
      cleanup: false,             // limpia estilos inline cuando termina
      delay: 350,
    });

    ScrollReveal().reveal('[data-animation="featured-products"]', {
      distance: "180px",          
      origin: "bottom",
      opacity: 0,
      duration: 700,
      easing: "cubic-bezier(0.4, 0, 0.2, 1)", 
      interval: 80,              
      reset: false,              
      cleanup: false,            
      delay: 450,
    });

    ScrollReveal().reveal('[data-animation="category-products"]', {
      distance: "220px",          
      origin: "bottom",
      opacity: 0,
      duration: 1200,
      easing: "cubic-bezier(0.4, 0, 0.2, 1)", 
      interval: 80,              
      reset: false,              
      cleanup: false,            
      delay: 950,
    });

  </script>
</Layout>
